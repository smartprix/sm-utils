<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Connect.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Cache.html">Cache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Cache.html#.$">$</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.clear">clear</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.del">del</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.get">get</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.getOrSet">getOrSet</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.getStale">getStale</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.globalCache">globalCache</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.has">has</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.memoize">memoize</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.set">set</a></li><li data-type='method' style='display: none;'><a href="Cache.html#.size">size</a></li><li data-type='method' style='display: none;'><a href="Cache.html#$">$</a></li><li data-type='method' style='display: none;'><a href="Cache.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="Cache.html#del">del</a></li><li data-type='method' style='display: none;'><a href="Cache.html#get">get</a></li><li data-type='method' style='display: none;'><a href="Cache.html#getOrSet">getOrSet</a></li><li data-type='method' style='display: none;'><a href="Cache.html#getStale">getStale</a></li><li data-type='method' style='display: none;'><a href="Cache.html#has">has</a></li><li data-type='method' style='display: none;'><a href="Cache.html#memoize">memoize</a></li><li data-type='method' style='display: none;'><a href="Cache.html#set">set</a></li><li data-type='method' style='display: none;'><a href="Cache.html#size">size</a></li></ul></li><li><a href="Connect.html">Connect</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Connect.html#.newCookieJar">newCookieJar</a></li><li data-type='method' style='display: none;'><a href="Connect.html#.url">url</a></li><li data-type='method' style='display: none;'><a href="Connect.html#asBuffer">asBuffer</a></li><li data-type='method' style='display: none;'><a href="Connect.html#body">body</a></li><li data-type='method' style='display: none;'><a href="Connect.html#cacheDir">cacheDir</a></li><li data-type='method' style='display: none;'><a href="Connect.html#catch">catch</a></li><li data-type='method' style='display: none;'><a href="Connect.html#contentType">contentType</a></li><li data-type='method' style='display: none;'><a href="Connect.html#cookie">cookie</a></li><li data-type='method' style='display: none;'><a href="Connect.html#cookieFile">cookieFile</a></li><li data-type='method' style='display: none;'><a href="Connect.html#cookieJar">cookieJar</a></li><li data-type='method' style='display: none;'><a href="Connect.html#cookies">cookies</a></li><li data-type='method' style='display: none;'><a href="Connect.html#fetch">fetch</a></li><li data-type='method' style='display: none;'><a href="Connect.html#field">field</a></li><li data-type='method' style='display: none;'><a href="Connect.html#fields">fields</a></li><li data-type='method' style='display: none;'><a href="Connect.html#followRedirect">followRedirect</a></li><li data-type='method' style='display: none;'><a href="Connect.html#get">get</a></li><li data-type='method' style='display: none;'><a href="Connect.html#globalCookies">globalCookies</a></li><li data-type='method' style='display: none;'><a href="Connect.html#header">header</a></li><li data-type='method' style='display: none;'><a href="Connect.html#headers">headers</a></li><li data-type='method' style='display: none;'><a href="Connect.html#httpAuth">httpAuth</a></li><li data-type='method' style='display: none;'><a href="Connect.html#httpProxy">httpProxy</a></li><li data-type='method' style='display: none;'><a href="Connect.html#isJSON">isJSON</a></li><li data-type='method' style='display: none;'><a href="Connect.html#method">method</a></li><li data-type='method' style='display: none;'><a href="Connect.html#post">post</a></li><li data-type='method' style='display: none;'><a href="Connect.html#proxy">proxy</a></li><li data-type='method' style='display: none;'><a href="Connect.html#proxyAuth">proxyAuth</a></li><li data-type='method' style='display: none;'><a href="Connect.html#put">put</a></li><li data-type='method' style='display: none;'><a href="Connect.html#referer">referer</a></li><li data-type='method' style='display: none;'><a href="Connect.html#save">save</a></li><li data-type='method' style='display: none;'><a href="Connect.html#socksProxy">socksProxy</a></li><li data-type='method' style='display: none;'><a href="Connect.html#then">then</a></li><li data-type='method' style='display: none;'><a href="Connect.html#timeout">timeout</a></li><li data-type='method' style='display: none;'><a href="Connect.html#timeoutMilli">timeoutMilli</a></li><li data-type='method' style='display: none;'><a href="Connect.html#timeoutMs">timeoutMs</a></li><li data-type='method' style='display: none;'><a href="Connect.html#url">url</a></li><li data-type='method' style='display: none;'><a href="Connect.html#userAgent">userAgent</a></li></ul></li><li><a href="DeQueue.html">DeQueue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="DeQueue.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#dequeue">dequeue</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#enqueue">enqueue</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#get">get</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#head">head</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#isEmpty">isEmpty</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#peek">peek</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#peekAt">peekAt</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#peekBack">peekBack</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#peekFront">peekFront</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#pop">pop</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#push">push</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#remove">remove</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#removeOne">removeOne</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#set">set</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#shift">shift</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#size">size</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#splice">splice</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#tail">tail</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#toArray">toArray</a></li><li data-type='method' style='display: none;'><a href="DeQueue.html#unshift">unshift</a></li></ul></li><li><a href="File.html">File</a><ul class='methods'><li data-type='method' style='display: none;'><a href="File.html#append">append</a></li><li data-type='method' style='display: none;'><a href="File.html#atime">atime</a></li><li data-type='method' style='display: none;'><a href="File.html#chmod">chmod</a></li><li data-type='method' style='display: none;'><a href="File.html#chmodr">chmodr</a></li><li data-type='method' style='display: none;'><a href="File.html#chown">chown</a></li><li data-type='method' style='display: none;'><a href="File.html#chownr">chownr</a></li><li data-type='method' style='display: none;'><a href="File.html#copy">copy</a></li><li data-type='method' style='display: none;'><a href="File.html#crtime">crtime</a></li><li data-type='method' style='display: none;'><a href="File.html#ctime">ctime</a></li><li data-type='method' style='display: none;'><a href="File.html#exists">exists</a></li><li data-type='method' style='display: none;'><a href="File.html#existsSync">existsSync</a></li><li data-type='method' style='display: none;'><a href="File.html#glob">glob</a></li><li data-type='method' style='display: none;'><a href="File.html#isDir">isDir</a></li><li data-type='method' style='display: none;'><a href="File.html#isFile">isFile</a></li><li data-type='method' style='display: none;'><a href="File.html#lstat">lstat</a></li><li data-type='method' style='display: none;'><a href="File.html#mkdir">mkdir</a></li><li data-type='method' style='display: none;'><a href="File.html#mkdirp">mkdirp</a></li><li data-type='method' style='display: none;'><a href="File.html#mkdirpPath">mkdirpPath</a></li><li data-type='method' style='display: none;'><a href="File.html#mtime">mtime</a></li><li data-type='method' style='display: none;'><a href="File.html#mv">mv</a></li><li data-type='method' style='display: none;'><a href="File.html#read">read</a></li><li data-type='method' style='display: none;'><a href="File.html#realpath">realpath</a></li><li data-type='method' style='display: none;'><a href="File.html#realpathSync">realpathSync</a></li><li data-type='method' style='display: none;'><a href="File.html#rename">rename</a></li><li data-type='method' style='display: none;'><a href="File.html#rm">rm</a></li><li data-type='method' style='display: none;'><a href="File.html#rmdir">rmdir</a></li><li data-type='method' style='display: none;'><a href="File.html#rmrf">rmrf</a></li><li data-type='method' style='display: none;'><a href="File.html#size">size</a></li><li data-type='method' style='display: none;'><a href="File.html#stat">stat</a></li><li data-type='method' style='display: none;'><a href="File.html#unlink">unlink</a></li><li data-type='method' style='display: none;'><a href="File.html#write">write</a></li></ul></li><li><a href="Lock.html">Lock</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Lock.html#acquire">acquire</a></li><li data-type='method' style='display: none;'><a href="Lock.html#release">release</a></li><li data-type='method' style='display: none;'><a href="Lock.html#tryAcquire">tryAcquire</a></li></ul></li><li><a href="Queue.html">Queue</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Queue.html#.exit">exit</a></li><li data-type='method' style='display: none;'><a href="Queue.html#.getCount">getCount</a></li><li data-type='method' style='display: none;'><a href="Queue.html#.init">init</a></li><li data-type='method' style='display: none;'><a href="Queue.html#.processJobById">processJobById</a></li><li data-type='method' style='display: none;'><a href="Queue.html#.status">status</a></li><li data-type='method' style='display: none;'><a href="Queue.html#activeJobs">activeJobs</a></li><li data-type='method' style='display: none;'><a href="Queue.html#addAndProcess">addAndProcess</a></li><li data-type='method' style='display: none;'><a href="Queue.html#addJob">addJob</a></li><li data-type='method' style='display: none;'><a href="Queue.html#addProcessor">addProcessor</a></li><li data-type='method' style='display: none;'><a href="Queue.html#cleanup">cleanup</a></li><li data-type='method' style='display: none;'><a href="Queue.html#completedJobs">completedJobs</a></li><li data-type='method' style='display: none;'><a href="Queue.html#delayedJobs">delayedJobs</a></li><li data-type='method' style='display: none;'><a href="Queue.html#delete">delete</a></li><li data-type='method' style='display: none;'><a href="Queue.html#failedJobs">failedJobs</a></li><li data-type='method' style='display: none;'><a href="Queue.html#inactiveJobs">inactiveJobs</a></li><li data-type='method' style='display: none;'><a href="Queue.html#pauseProcessor">pauseProcessor</a></li><li data-type='method' style='display: none;'><a href="Queue.html#pendingJobs">pendingJobs</a></li><li data-type='method' style='display: none;'><a href="Queue.html#processJob">processJob</a></li><li data-type='method' style='display: none;'><a href="Queue.html#resumeProcessor">resumeProcessor</a></li><li data-type='method' style='display: none;'><a href="Queue.html#setAttempts">setAttempts</a></li><li data-type='method' style='display: none;'><a href="Queue.html#setDelay">setDelay</a></li><li data-type='method' style='display: none;'><a href="Queue.html#setNoFailure">setNoFailure</a></li><li data-type='method' style='display: none;'><a href="Queue.html#setRemoveOnCompletion">setRemoveOnCompletion</a></li><li data-type='method' style='display: none;'><a href="Queue.html#setTTL">setTTL</a></li></ul></li><li><a href="RedisCache.html">RedisCache</a><ul class='methods'><li data-type='method' style='display: none;'><a href="RedisCache.html#.$">$</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.bypass">bypass</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.clear">clear</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.del">del</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.get">get</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.getOrSet">getOrSet</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.getStale">getStale</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.globalCache">globalCache</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.has">has</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.isBypassed">isBypassed</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.memoize">memoize</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.set">set</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#.size">size</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#$">$</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#bypass">bypass</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#del">del</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#delContains">delContains</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#get">get</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#getOrSet">getOrSet</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#getStale">getStale</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#has">has</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#isBypassed">isBypassed</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#memoize">memoize</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#set">set</a></li><li data-type='method' style='display: none;'><a href="RedisCache.html#size">size</a></li></ul></li><li><a href="Vachan.html">Vachan</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Vachan.html#.debounce">debounce</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.exec">exec</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.exit">exit</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.finally">finally</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.identity">identity</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.lazy">lazy</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.lazyFrom">lazyFrom</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.promiseMap">promiseMap</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.promiseMapKeys">promiseMapKeys</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.promiseMapValues">promiseMapValues</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.sleep">sleep</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.timeout">timeout</a></li><li data-type='method' style='display: none;'><a href="Vachan.html#.waitFor">waitFor</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="config.html">config</a><ul class='methods'><li data-type='method' style='display: none;'><a href="config.html#.cfg.assign">cfg.assign</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.delete">cfg.delete</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.file">cfg.file</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.get">cfg.get</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.isDev">cfg.isDev</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.isProduction">cfg.isProduction</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.isProductionLike">cfg.isProductionLike</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.isStaging">cfg.isStaging</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.isTest">cfg.isTest</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.merge">cfg.merge</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.read">cfg.read</a></li><li data-type='method' style='display: none;'><a href="config.html#.cfg.set">cfg.set</a></li></ul></li><li><a href="Crypt.html">Crypt</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Crypt.html#.base64Decode">base64Decode</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.base64Encode">base64Encode</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.base64UrlDecode">base64UrlDecode</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.base64UrlEncode">base64UrlEncode</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.baseConvert">baseConvert</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.baseDecode">baseDecode</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.baseDecodeToBuffer">baseDecodeToBuffer</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.baseEncode">baseEncode</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.decrypt">decrypt</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.decryptStatic">decryptStatic</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.encrypt">encrypt</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.encryptedTimestampedId">encryptedTimestampedId</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.encryptStatic">encryptStatic</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.hash">hash</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.hashPassword">hashPassword</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.hmac">hmac</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.md5">md5</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.nanoSecondsAlpha">nanoSecondsAlpha</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.packNumbers">packNumbers</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.random">random</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.randomInt">randomInt</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.randomString">randomString</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.randomUUID">randomUUID</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.seededRandom">seededRandom</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sequentialID">sequentialID</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sequentialUUID">sequentialUUID</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sha1">sha1</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sha1Hmac">sha1Hmac</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sha256">sha256</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sha256Hmac">sha256Hmac</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sha384">sha384</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sha512">sha512</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.shuffle">shuffle</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.sign">sign</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.signAndEncrypt">signAndEncrypt</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.unpackNumbers">unpackNumbers</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.verify">verify</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.verifyAndDecrypt">verifyAndDecrypt</a></li><li data-type='method' style='display: none;'><a href="Crypt.html#.verifyPassword">verifyPassword</a></li></ul></li><li><a href="Require.html">Require</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Require.html#.requireGlobal">requireGlobal</a></li><li data-type='method' style='display: none;'><a href="Require.html#.requireModule">requireModule</a></li><li data-type='method' style='display: none;'><a href="Require.html#.resolve">resolve</a></li><li data-type='method' style='display: none;'><a href="Require.html#.resolveGlobal">resolveGlobal</a></li></ul></li><li><a href="Str.html">Str</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Str.html#.escapeRegex">escapeRegex</a></li><li data-type='method' style='display: none;'><a href="Str.html#.invertCase">invertCase</a></li><li data-type='method' style='display: none;'><a href="Str.html#.isConsonant">isConsonant</a></li><li data-type='method' style='display: none;'><a href="Str.html#.isVowel">isVowel</a></li><li data-type='method' style='display: none;'><a href="Str.html#.numberFormat">numberFormat</a></li><li data-type='method' style='display: none;'><a href="Str.html#.numberToWords">numberToWords</a></li><li data-type='method' style='display: none;'><a href="Str.html#.plural">plural</a></li><li data-type='method' style='display: none;'><a href="Str.html#.pluralize">pluralize</a></li><li data-type='method' style='display: none;'><a href="Str.html#.rot13">rot13</a></li><li data-type='method' style='display: none;'><a href="Str.html#.rot47">rot47</a></li><li data-type='method' style='display: none;'><a href="Str.html#.spaceClean">spaceClean</a></li><li data-type='method' style='display: none;'><a href="Str.html#.stripTags">stripTags</a></li><li data-type='method' style='display: none;'><a href="Str.html#.transform">transform</a></li><li data-type='method' style='display: none;'><a href="Str.html#.trimToNext">trimToNext</a></li><li data-type='method' style='display: none;'><a href="Str.html#.tryParseJson">tryParseJson</a></li></ul></li><li><a href="System.html">System</a><ul class='methods'><li data-type='method' style='display: none;'><a href="System.html#.exec">exec</a></li><li data-type='method' style='display: none;'><a href="System.html#.execFile">execFile</a></li><li data-type='method' style='display: none;'><a href="System.html#.execFileOut">execFileOut</a></li><li data-type='method' style='display: none;'><a href="System.html#.execOut">execOut</a></li><li data-type='method' style='display: none;'><a href="System.html#.exit">exit</a></li><li data-type='method' style='display: none;'><a href="System.html#.forceExit">forceExit</a></li><li data-type='method' style='display: none;'><a href="System.html#.getAllUsers">getAllUsers</a></li><li data-type='method' style='display: none;'><a href="System.html#.getuid">getuid</a></li><li data-type='method' style='display: none;'><a href="System.html#.getUserInfo">getUserInfo</a></li><li data-type='method' style='display: none;'><a href="System.html#.gracefulServerExit">gracefulServerExit</a></li><li data-type='method' style='display: none;'><a href="System.html#.microtime">microtime</a></li><li data-type='method' style='display: none;'><a href="System.html#.millitime">millitime</a></li><li data-type='method' style='display: none;'><a href="System.html#.nanotime">nanotime</a></li><li data-type='method' style='display: none;'><a href="System.html#.noUmask">noUmask</a></li><li data-type='method' style='display: none;'><a href="System.html#.onExit">onExit</a></li><li data-type='method' style='display: none;'><a href="System.html#.sleep">sleep</a></li><li data-type='method' style='display: none;'><a href="System.html#.tick">tick</a></li><li data-type='method' style='display: none;'><a href="System.html#.time">time</a></li><li data-type='method' style='display: none;'><a href="System.html#.yesUmask">yesUmask</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#baseConvert">baseConvert</a></li><li><a href="global.html#cfg">cfg</a></li><li><a href="global.html#crypt">crypt</a></li><li><a href="global.html#d">d</a></li><li><a href="global.html#file">file</a></li><li><a href="global.html#system">system</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">Connect.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import path from 'path';
import _ from 'lodash';
import request from 'request';
import FileCookieStore from 'tough-cookie-file-store';
import SocksHTTPAgent from 'sm-socks5-http-client/lib/Agent';
import SocksHTTPSAgent from 'socks5-https-client/lib/Agent';
import File from './File';
import Crypt from './Crypt';

const userAgents = {
	chrome: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36',
	edge: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/51.0.2704.79 Safari/537.36 Edge/14.14393',
	firefox: 'Mozilla/5.0 (Windows NT 10.0; WOW64; rv:54.0) Gecko/20100101 Firefox/54.0',
	ie: 'Mozilla/5.0 (Windows NT 10.0; WOW64; Trident/7.0; rv:11.0) like Gecko',
	operaMini: 'Opera/9.80 (Android; Opera Mini/8.0.1807/36.1609; U; en) Presto/2.12.423 Version/12.16',
	googlebot: 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
	googlebotMobile: 'â€‹Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)',
	mobile: 'Mozilla/5.0 (Linux; Android 6.0.1; SM-G920V Build/MMB29K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.98 Mobile Safari/537.36',
	chromeMobile: 'Mozilla/5.0 (Linux; Android 6.0.1; SM-G920V Build/MMB29K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.98 Mobile Safari/537.36',
	android: 'Mozilla/5.0 (Linux; Android 6.0.1; SM-G920V Build/MMB29K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.98 Mobile Safari/537.36',
	iphone: 'Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25',
	safariMobile: 'Mozilla/6.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Version/8.0 Mobile/10A5376e Safari/8536.25',
	tablet: 'Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.0.2 Mobile/9A5248d Safari/6533.18.5',
	ipad: 'Mozilla/5.0 (iPad; CPU OS 5_0 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.0.2 Mobile/9A5248d Safari/6533.18.5',
	windows: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36',
};

/**
 * Returns proxy url based on the proxy options.
 *
 * @param  {Object} proxy proxy options
 * @return {String} proxy url based on the options
 * @private
 */
function makeProxyUrl(proxy) {
	let url = proxy.address.replace('http://', '');
	if (proxy.port) {
		url = url.split(':')[0] + ':' + proxy.port;
	}
	if (proxy.auth &amp;&amp; proxy.auth.username) {
		url = `${encodeURIComponent(proxy.auth.username)}:${encodeURIComponent(proxy.auth.password)}@${url}`;
	}

	return `http://${url}`;
}

/**
 * Simple &amp; Powerful HTTP request client.
 */
class Connect {
	/**
	 * Creates a new Connect object.
	 * @constructor
	 */
	constructor() {
		/**
		 * Timeout period for the request in milliseconds
		 * @private
		 */
		this.requestTimeout = 120 * 1000;
		/**
		 * Various options (or parameters) defining the Connection
		 * @private
		 */
		this.options = {
			url: null,
			method: 'GET',
			headers: {
				'User-Agent': userAgents.chrome,
				Accept: 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8',
				'Accept-Language': 'en-US,en;q=0.8',
			},
			cookies: {},
			jar: null,
			followRedirect: true,
			maxRedirects: 6,
			gzip: true,
			// timeout: 120 * 1000,
			strictSSL: false,
			proxy: {},
			// tunnel: true,
			fields: {},
		};
	}

	/**
	 * Set the url for the connection.
	 *
	 * @param {String} url self-descriptive
	 * @return {Connect} self
	 */
	url(url) {
		this.options.url = url;
		return this;
	}

	/**
	 * @static
	 * Creates and returns a new Connect object with the given url.
	 *
	 * @param  {String} url self-descriptive
	 * @return {Connect}    A new Connect object with url set to the given url
	 */
	static url(url) {
		const connect = new this();
		connect.url(url);
		return connect;
	}

	/**
	* @static
	 * Returns a new cookie jar.
	 * @param {Array&lt;any>} args
	 * @return {CookieJar} A cookie jar
	 */
	static newCookieJar(...args) {
		return request.jar(...args);
	}

	/**
	 * Set or unset the followRedirect option for the connection.
	 *
	 * @param  {Boolean} shouldFollowRedirect boolean representing whether to follow redirect or not
	 * @return {Connect}                      self
	 */
	followRedirect(shouldFollowRedirect) {
		this.options.followRedirect = shouldFollowRedirect;
		return this;
	}

	/**
	 * Set value of a header parameter for the connection.
	 *
	 * @param  {String} headerName name of the header parameter whose value is to be set
	 * @param  {*} headerValue     value to be set
	 * @return {Connect}           self
	 */
	header(headerName, headerValue) {
		if (typeof headerName === 'string') {
			this.options.headers[headerName] = headerValue;
		}
		else {
			_.assign(this.options.headers, headerName);
		}

		return this;
	}

	/**
	 * Set value of the headers for the connection.
	 *
	 * @param  {Object} headers object representing the headers for the connection
	 * @return {Connect}        self
	 */
	headers(headers) {
		_.assign(this.options.headers, headers);
		return this;
	}

	/**
	 * Set the body of the connection object.
	 *
	 * @param  {*} body                    value for body
	 * @param  {String} [contentType=null] string representing the content type of the body
	 * @return {Connect}                   self
	 */
	body(body, contentType = null) {
		if (_.isPlainObject(body)) {
			body = JSON.stringify(body);
			contentType = 'json';
		}

		if (contentType === 'json' || this.isJSON()) {
			this.header('Content-Type', 'application/json');
			if (typeof body !== 'string') {
				body = JSON.stringify(body);
			}
		}

		this.options.body = body;
		return this;
	}

	/**
	 * Set the 'Referer' field in the headers.
	 *
	 * @param  {String} referer referer value
	 * @return {Connect}
	 */
	referer(referer) {
		this.header('Referer', referer);
		return this;
	}

	/**
	 * Set the 'User-Agent' field in the headers.
	 *
	 * @param  {String} userAgent name of the user-agent or its value
	 * @return {Connect}          self
	 */
	userAgent(userAgent) {
		this.header('User-Agent', userAgents[userAgent] || userAgent);
		return this;
	}

	/**
	 * Set the 'Content-Type' field in the headers.
	 *
	 * @param  {String} contentType value for content-type
	 * @return {Connect}
	 */
	contentType(contentType) {
		this.header('Content-Type', contentType);
		return this;
	}

	/**
	 * Returns whether the content-type is JSON or not
	 *
	 * @return {Boolean} true, if content-type is JSON; false, otherwise
	 */
	isJSON() {
		return this.options.headers['Content-Type'] === 'application/json';
	}

	/**
	 * Sets the value of a cookie.
	 * Can be used to enable global cookies, if cookieName is set to true
	 * and cookieValue is undefined (or is not passed as an argument).
	 * Can also be used to set multiple cookies by passing in an object
	 * representing the cookies and their values as key:value pairs.
	 *
	 * @param  {String|Boolean|Object} cookieName  represents the name of the
	 * cookie to be set, or the cookies object
	 * @param  {Object} cookieValue                cookie value to be set
	 * @return {Connect}                           self
	 */
	cookie(cookieName, cookieValue) {
		if (cookieName === true &amp;&amp; cookieValue === undefined) {
			this.globalCookies();
		}
		if (typeof cookieName === 'string') {
			this.options.cookies[cookieName] = cookieValue;
		}
		else {
			_.assign(this.options.cookies, cookieName);
		}

		return this;
	}

	/**
	 * Sets multiple cookies.
	 * Can be used to enable global cookies, if cookies is set to true.
	 *
	 * @param  {Object|Boolean} cookies object representing the cookies
	 * and their values as key:value pairs.
	 * @return {Connect}                self
	 */
	cookies(cookies) {
		if (cookies === true) {
			this.globalCookies();
		}
		else {
			_.assign(this.options.cookies, cookies);
		}

		return this;
	}

	/**
	 * Enable global cookies.
	 *
	 * @param  {Boolean} [enableGlobalCookies=true] self-descriptive
	 * @return {Connect}                            self
	 */
	globalCookies(enableGlobalCookies = true) {
		this.options.jar = enableGlobalCookies;
		return this;
	}

	/**
	 * Set the value of cookie jar based on a file (cookie store).
	 *
	 * @param  {String} fileName name of (or path to) the file
	 * @return {Connect}         self
	 */
	cookieFile(fileName) {
		const cookieJar = request.jar(new FileCookieStore(fileName));
		this.options.jar = cookieJar;
		return this;
	}

	/**
	 * Set the value of cookie jar.
	 *
	 * @param  {CookieJar} cookieJar value to be set
	 * @return {Connect}             self
	 */
	cookieJar(cookieJar) {
		this.options.jar = cookieJar;
		return this;
	}

	/**
	 * Set request timeout.
	 *
	 * @param  {Number} timeout timeout value in seconds
	 * @return {Connect}        self
	 */
	timeout(timeout) {
		this.requestTimeout = timeout * 1000;
		return this;
	}

	/**
	 * Set request timeout.
	 *
	 * @param  {Number} timeoutInMs timeout value in milliseconds
	 * @return {Connect}            self
	 */
	timeoutMs(timeoutInMs) {
		this.requestTimeout = timeoutInMs;
		return this;
	}

	/**
	 * alias for timeoutMs
	 * @param {number} timeoutInMs
	 * @return {Connect}
	 */
	timeoutMilli(timeoutInMs) {
		return this.timeoutMs(timeoutInMs);
	}

	/**
	 * Set value of a field in the options.
	 * Can also be used to set multiple fields by passing in an object
	 * representing the field-names and their values as key:value pairs.
	 *
	 * @param  {String|Object} fieldName name of the field to be set, or the fields object
	 * @param  {*} fieldValue            value to be set
	 * @return {Connect}                 self
	 */
	field(fieldName, fieldValue) {
		if (typeof fieldName === 'string') {
			this.options.fields[fieldName] = fieldValue;
		}
		else {
			_.assign(this.options.fields, fieldName);
		}

		return this;
	}

	/**
	 * Set multiple fields.
	 *
	 * @param  {Object} fields object representing the field-names and their
	 * values as key:value pairs
	 * @return {Connect}       self
	 */
	fields(fields) {
		_.assign(this.options.fields, fields);
		return this;
	}

	/**
	 * Set the request method for the connection.
	 *
	 * @param  {String} method one of the HTTP request methods ('GET', 'PUT', 'POST', etc.)
	 * @return {Connect}       self
	 */
	method(method) {
		this.options.method = (method || 'GET').toUpperCase();
		return this;
	}

	/**
	 * Set username and password for authentication.
	 *
	 * @param  {String} username self-descriptive
	 * @param  {String} password self-descriptive
	 * @return {Connect}         self
	 */
	httpAuth(username, password) {
		if (typeof username === 'string') {
			// username &amp; password are strings
			this.options.auth = {
				username,
				password,
			};
		}
		else if (username.username) {
			// username argument is an object of {username, password}
			this.options.auth = username;
		}

		return this;
	}

	/**
	 * Set proxy address (or options).
	 *
	 * @param  {String|Object} proxy proxy address, or object representing proxy options
	 * @return {Connect}             self
	 */
	proxy(proxy) {
		// actual proxy is added at the end using _addProxy
		// this is because we need the url (http or https) to add the proxy
		// and url might be added after this method
		if (typeof proxy === 'string') {
			_.assign(this.options.proxy, {
				address: proxy,
				port: null,
				type: 'http',
			});
		}
		else {
			this.options.proxy = proxy;
		}

		return this;
	}

	/**
	 * Set address and port for an http proxy.
	 *
	 * @param  {String} proxyAddress self-descriptive
	 * @param  {Number} proxyPort    self-descriptive
	 * @return {Connect}             self
	 */
	httpProxy(proxyAddress, proxyPort) {
		_.assign(this.options.proxy, {
			address: proxyAddress,
			port: proxyPort,
			type: 'http',
		});

		return this;
	}

	/**
	 * Set address and port for a socks proxy.
	 *
	 * @param  {String} proxyAddress self-descriptive
	 * @param  {Number} proxyPort    self-descriptive
	 * @return {Connect}             self
	 */
	socksProxy(proxyAddress, proxyPort) {
		_.assign(this.options.proxy, {
			address: proxyAddress,
			port: proxyPort,
			type: 'socks',
		});

		return this;
	}

	/**
	 * Set username and password for proxy.
	 *
	 * @param  {String} username self-descriptive
	 * @param  {String} password self-descriptive
	 * @return {Connect}         self
	 */
	proxyAuth(username, password) {
		if (typeof username === 'string') {
			// username &amp; password are strings
			this.options.proxy.auth = {
				username,
				password,
			};
		}
		else if (username.username) {
			// username argument is an object of {username, password}
			this.options.proxy.auth = username;
		}

		return this;
	}

	/**
	 * Set request method to 'GET'.
	 *
	 * @return {Connect} self
	 */
	get() {
		this.method('GET');
		return this;
	}

	/**
	 * Set request method to 'POST'.
	 *
	 * @return {Connect} self
	 */
	post() {
		this.method('POST');
		return this;
	}

	/**
	 * Set request method to 'PUT'.
	 *
	 * @return {Connect} self
	 */
	put() {
		this.method('PUT');
		return this;
	}

	/**
	 * Set cache directory for the connection.
	 *
	 * @param  {String} dir name or path to the directory
	 * @return {Connect}    self
	 */
	cacheDir(dir) {
		this.resposeCacheDir = dir;
		return this;
	}

	/**
	 * Set if the body is to be returned as a buffer
	 *
	 * @param  {Boolean} [returnAsBuffer=true] self-descriptive
	 * @return {Connect}                       self
	 */
	asBuffer(returnAsBuffer = true) {
		this.options.encoding = returnAsBuffer ? null : undefined;
		return this;
	}

	/**
	 * Set the path for file for saving the response.
	 *
	 * @param  {String} filePath self-descriptive
	 * @return {Connect}         self
	 */
	save(filePath) {
		// get response as buffer
		this.asBuffer();
		this.saveFilePath = filePath;
		return this;
	}

	/**
	 * Add proxy based on the proxy options. Proxy is added,
	 * if and only if proxy address has been previously set.
	 * If no proxy type is previously set, 'http' is taken as
	 * the default proxy type.
	 *
	 * NOTE: This function is for internal use
	 * @private
	 */
	_addProxy() {
		const proxy = this.options.proxy;
		if (!proxy) return;
		if (typeof proxy === 'string') return;

		this.options.proxy = null;
		if (!proxy.address) return;

		const proxyType = proxy.type || 'http';

		if (proxyType === 'http' || proxyType === 'https') {
			this.options.proxy = makeProxyUrl(proxy);
		}
		else if (proxyType === 'socks' || proxyType === 'socks5') {
			if (_.startsWith(this.options.url, 'https://')) {
				this.options.agentClass = SocksHTTPSAgent;
			}
			else {
				this.options.agentClass = SocksHTTPAgent;
			}

			const agentOptions = {};
			agentOptions.socksHost = proxy.address.split(':')[0];
			agentOptions.socksPort = proxy.port || proxy.address.split(':')[1] || 1080;
			if (proxy.auth &amp;&amp; proxy.auth.username) {
				agentOptions.socksUsername = proxy.auth.username;
				agentOptions.socksPassword = proxy.auth.password;
			}

			this.options.agentOptions = agentOptions;
		}
	}

	/**
	 * Add the options 'fields' to the options body, form or qs
	 * on the basis of the request method.
	 *
	 * NOTE: This function is for internal use
	 * @private
	 */
	_addFields() {
		if (!this.options.fields) return;
		if (_.isEmpty(this.options.fields)) return;

		const method = this.options.method;
		if (method === 'POST' || method === 'PUT') {
			if (this.isJSON()) {
				this.options.body = JSON.stringify(this.options.fields);
			}
			else {
				this.options.form = this.options.fields;
			}
		}
		else {
			this.options.qs = this.options.qs || {};
			_.assign(this.options.qs, this.options.fields);
		}
	}

	/**
	 * Add cookies in the options to the header.
	 *
	 * NOTE: This function is for internal use
	 * @private
	 */
	_addCookies() {
		if (!this.options.cookies) return;

		const cookies = [];
		_.forEach(this.options.cookies, (value, key) => {
			cookies.push(`${key}=${value}`);
		});

		if (cookies.length) {
			this.header('Cookie', cookies.join('; '));
		}
	}


	/**
	 * It resolves or rejects the promise object. It is
	 * used by fetch() to make the promise.
	 *
	 * NOTE: This function is for internal use
	 * @private
	 */
	_makeFetchPromise(resolve, reject, cacheFilePath) {
		this._addProxy();
		this._addFields();
		this._addCookies();

		const startTime = Date.now();
		const req = request(this.options, (error, response, body) => {
			if (this.timeoutTimer) {
				clearTimeout(this.timeoutTimer);
				this.timeoutTimer = null;
			}

			if (error) {
				error.timeTaken = Date.now() - startTime;
				reject(error);
				return;
			}
			else if (response.statusCode === 407) {
				const e = new Error('407 Proxy Authentication Required');
				e.code = 'EPROXYAUTH';
				e.timeTaken = Date.now() - startTime;
				reject(e);
				return;
			}

			response.body = body;
			response.url = response.request.uri.href || this.options.url;
			response.timeTaken = Date.now() - startTime;
			response.cached = false;
			response.status = response.statusCode;

			const promises = [];

			if (this.saveFilePath) {
				promises.push(File(this.saveFilePath).write(response.body));
			}
			if (cacheFilePath &amp;&amp; response.statusCode === 200) {
				promises.push(File(cacheFilePath).write(response.body));
			}

			if (promises.length) {
				Promise.all(promises)
					.then(() => { resolve(response) })
					.catch(() => { resolve(response) });
			}
			else {
				resolve(response);
			}
		});

		if (this.requestTimeout) {
			this.timeoutTimer = setTimeout(() => {
				try {
					req.abort();
				}
				catch (err) {
					// ignore errors
				}
				finally {
					const e = new Error('Request Timed Out');
					e.code = 'ETIMEDOUT';
					e.timeTaken = Date.now() - startTime;
					reject(e);
				}
			}, this.requestTimeout);
		}
	}

	/**
	 * @typedef {object} response
	 * @property {string} body the actual response body
	 * @property {string} url the final url downloaded after following all redirects
	 * @property {number} timeTaken time taken (in ms) for the request
	 * @property {boolean} cached false if the response was downloaded, true if returned from a cache
	 * @property {number} statusCode
	 */

	/**
	 * It creates and returns a promise based on the information
	 * passed to and parameters of this object.
	 *
	 * @return {Promise&lt;response>} a promise that resolves to response
	 */
	fetch() {
		if (this.promise) return this.promise;

		if (this.timeoutTimer) {
			clearTimeout(this.timeoutTimer);
			this.timeoutTimer = null;
		}

		this.promise = new Promise((resolve, reject) => {
			let cacheFilePath = null;

			if (this.resposeCacheDir) {
				const cacheKey = Crypt.md5(
					JSON.stringify(_.pick(this.options, ['url', 'method', 'fields']))
				);

				cacheFilePath = path.join(this.resposeCacheDir, cacheKey);
				File(cacheFilePath).read().then((cachedContents) => {
					const response = {
						body: cachedContents,
						statusCode: 200,
						status: 200,
						url: this.options.url,
						timeTaken: 0,
						cached: true,
					};

					resolve(response);
				}).catch(() => {
					// Ignore Errors
					this._makeFetchPromise(resolve, reject, cacheFilePath);
				});
			}
			else {
				this._makeFetchPromise(resolve, reject, cacheFilePath);
			}
		});

		return this.promise;
	}

	/**
	 * It is used for method chaining.
	 *
	 * @param  {function} successCallback function to be called if the Promise is fulfilled
	 * @param  {function} errorCallback   function to be called if the Promise is rejected
	 * @return {Promise&lt;any>}                  a Promise in pending state
	 */
	then(successCallback, errorCallback) {
		return this.fetch().then(successCallback, errorCallback);
	}

	/**
	 * It is also used for method chaining, but handles rejected cases only.
	 *
	 * @param  {function} errorCallback   function to be called if the Promise is rejected
	 * @return {Promise&lt;any>}                  a Promise in pending state
	 */
	catch(errorCallback) {
		return this.fetch().catch(errorCallback);
	}
}

export default Connect;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/jquery-3.1.1.min.js"></script>

<script src="scripts/search.js"></script>


<script src="scripts/collapse.js"></script>



</body>
</html>
